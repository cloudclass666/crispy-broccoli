!function(){for(var e=0,n=["ms","moz","webkit","o"],a=0;a<n.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[n[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[a]+"CancelAnimationFrame"]||window[n[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),s=window.setTimeout(function(){n(a+i)},i);return e=a+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var KLEO=KLEO||{};!function(e){"use strict";function n(){a.each(function(){var n=e(this).width(),a=e(this).height(),i=n/a,s=e(this).find(".image").width(),t=e(this).find(".image").height(),o=s/t;if(0==n||0==a)return!1;if(e(this).css("opacity","0"),i>=o){var l=n/o;l=parseInt(l);var r=parseInt(l/2);e(this).find(".image").css({width:n,height:l,marginTop:-r,marginLeft:0,top:"50%",left:"0"}),e(this).css("opacity","1")}else{var d=a*o;d=parseInt(d);var c=parseInt(d/2);e(this).find(".image").css({width:d,height:a,marginTop:0,marginLeft:-c,top:"0",left:"50%"}),e(this).css("opacity","1")}})}var a=e(".image-wrapper"),i=e(".image-wrapper .image"),s=0,t=800,o=e(".fade-on-scroll-half"),l=e(".fade-on-scroll"),r=e(".fade-on-scroll-second"),d=e(".top-on-scroll"),c=e(".bottom-on-scroll");e(window).bind("scroll",function(){var n=e(document).scrollTop(),a=0,i=0,u=0,m=0,h=40;s>=n?(a=.5,i=1,u=1,m=0):t>=n&&(a=.5-n/t,i=1-n/(t-50),u=(.5-n/t)/4,m+=n/2,h-=n/2.5),o.css("opacity",a),l.css("opacity",i),r.css("opacity",i),d.css("top",m),c.css("bottom",h)}),KLEO.isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},mobileWidth:function(){return window.matchMedia?window.matchMedia("(max-width: 480px)").matches:e(window).innerWidth()<465},tabletWidth:function(){return window.matchMedia?window.matchMedia("(max-width: 767px)").matches:e(window).innerWidth()<753},any:function(){return KLEO.isMobile.Android()||KLEO.isMobile.BlackBerry()||KLEO.isMobile.iOS()||KLEO.isMobile.Opera()||KLEO.isMobile.Windows()}},KLEO.isHighDensity=function(){return window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3},KLEO.main={init:function(){KLEO.main.responsiveClasses(),KLEO.main.pageTransition(),KLEO.main.imageFade(),KLEO.main.animations(),KLEO.main.toggles(),KLEO.main.accordions(),KLEO.main.linkScroll(),KLEO.main.lightBox(),KLEO.main.resizeVideos(),m.on("lightBoxAjaxAdded",function(){KLEO.main.resizeVideos()}),KLEO.main.loadFlexSlider(),KLEO.main.applyRetina(),KLEO.main.ajaxLogin(),KLEO.main.ajaxLostPass(),KLEO.main.menuWidget(),e(".kleo_ajax_results").length&&(KLEO.main.toggleAjaxSearch(),KLEO.main.doAjaxSearch()),KLEO.isMobile.any()&&m.addClass("device-touch"),KLEO.main.onScroll(),a.css("opacity","0"),e("body").on("sidemenu-moving-start",function(){!e("#page-title").hasClass("blog-full")||e("body").hasClass("device-xs")||e("body").hasClass("device-xxs")||i.css("opacity","0")}),e("body").on("sidemenu-moving",function(){!e("#page-title").hasClass("blog-full")||e("body").hasClass("device-xs")||e("body").hasClass("device-xxs")||(n(),i.css("opacity",".5"))})},onLoad:function(){KLEO.main.kleoIsotope(),n(),KLEO.main.charts()},onResize:function(){n()},onScroll:function(){u.on("scroll",function(){})},setCookie:function(e,n,a,i){"undefined"==typeof a&&(a="/");var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3);var t="expires="+s.toUTCString();document.cookie=e+"="+n+"; "+t+"; path="+a},menuWidget:function(){var n=jQuery(".widget_nav_menu ul.sub-menu").parent("li");n.addClass("parent"),n.children("a").after('<span class="menu-arrow"></span>'),n.find(".menu-arrow").click(function(){return jQuery(this).closest(".parent").children(".sub-menu").stop(!0,!0).slideToggle("fast"),jQuery(this).toggleClass("active"),!1});var a=jQuery(".widget_pages ul.children").parent("li");a.addClass("parent"),a.children("a").after('<span class="menu-arrow"></span>'),a.find(".menu-arrow").click(function(){return jQuery(this).closest(".parent").children(".children").stop(!0,!0).slideToggle("fast"),jQuery(this).toggleClass("active"),!1}),a.find(".current_page_item").length&&e(".widget_pages ul.children .current_page_item").closest(".children").stop(!0,!0).slideToggle("fast"),e(".submenu").next(".submenu").length&&e(".submenu").next(".submenu").each(function(){e(this).prev(".submenu").append(e(this).html()),e(this).remove()})},responsiveClasses:function(){var e=jRespond([{label:"small-mobile",enter:0,exit:479},{label:"mobile",enter:480,exit:767},{label:"tablet",enter:768,exit:991},{label:"desktop",enter:992,exit:1199},{label:"large-desktop",enter:1200,exit:1e4}]);e.addFunc([{breakpoint:"large-desktop",enter:function(){m.addClass("device-lg")},exit:function(){m.removeClass("device-lg")}},{breakpoint:"desktop",enter:function(){m.addClass("device-md")},exit:function(){m.removeClass("device-md")}},{breakpoint:"tablet",enter:function(){m.addClass("device-sm")},exit:function(){m.removeClass("device-sm")}},{breakpoint:"mobile",enter:function(){m.addClass("device-xs")},exit:function(){m.removeClass("device-xs")}},{breakpoint:"small-mobile",enter:function(){m.addClass("device-xxs")},exit:function(){m.removeClass("device-xxs")}}])},imagePreload:function(n,a){var i={delay:250,transition:400,easing:"linear"};e.extend(i,a),e(n).each(function(){var n=e(this);n.css({visibility:"hidden",opacity:0,display:"block"}),n.wrap('<span class="preloader" />'),n.one("load",function(){e(this).delay(i.delay).css({visibility:"visible"}).animate({opacity:1},i.transition,i.easing,function(){e(this).unwrap('<span class="preloader" />')})}).each(function(){this.complete&&e(this).trigger("load")})})},pageTransition:function(){if(e("html").hasClass("js")&&m.hasClass("page-transition")){var n=m.attr("data-animation-in"),a=m.attr("data-animation-out"),i=m.attr("data-speed-in"),s=m.attr("data-speed-out"),t=m.attr("data-loader"),o='<div class="css3-spinner-bounce1"></div><div class="css3-spinner-bounce2"></div><div class="css3-spinner-bounce3"></div>';n||(n="fadeIn"),a||(a="fadeOut"),i||(i=1500),s||(s=800),"2"==t?o='<div class="css3-spinner-flipper"></div>':"3"==t?o='<div class="css3-spinner-double-bounce1"></div><div class="css3-spinner-double-bounce2"></div>':"4"==t?o='<div class="css3-spinner-rect1"></div><div class="css3-spinner-rect2"></div><div class="css3-spinner-rect3"></div><div class="css3-spinner-rect4"></div><div class="css3-spinner-rect5"></div>':"5"==t?o='<div class="css3-spinner-cube1"></div><div class="css3-spinner-cube2"></div>':"6"==t&&(o='<div class="css3-spinner-scaler"></div>'),h.animsition({inClass:n,outClass:a,inDuration:Number(i),outDuration:Number(s),linkElement:'#primary-menu ul li a:not([target="_blank"]):not([href^=#])',loading:!0,loadingParentElement:"body",loadingClass:"css3-spinner",loadingHtml:o,unSupportCss:["animation-duration","-webkit-animation-duration","-o-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"body"})}},imageFade:function(){e(".image_fade").hover(function(){e(this).filter(":not(:animated)").animate({opacity:.8},400)},function(){e(this).animate({opacity:1},400)})},animations:function(){var n=e("[data-animate]");n.length>0&&(m.hasClass("device-lg")||m.hasClass("device-md")||m.hasClass("device-sm"))&&n.each(function(){var n=e(this),a=n.attr("data-delay"),i=0;if(i=a?Number(a)+500:500,!n.hasClass("animated")){n.addClass("not-animated");var s=n.attr("data-animate");n.appear(function(){setTimeout(function(){n.removeClass("not-animated").addClass(s+" animated")},i)},{accX:0,accY:-120},"easeInCubic")}})},topScrollOffset:function(){var e=0;return e},linkScroll:function(){e("a[data-scrollto]").click(function(){var n=e(this),a=n.attr("data-scrollto"),i=n.attr("data-speed"),s=n.attr("data-offset"),t=n.attr("data-easing");return i||(i=750),s||(s=KLEO.main.topScrollOffset()),t||(t="easeOutQuad"),e("html,body").stop(!0).animate({scrollTop:e(a).offset().top-Number(s)},Number(i),t),!1})},toggles:function(){var n=e(".toggle");n.length>0&&n.each(function(){var n=e(this),a=n.attr("data-state");"open"!=a?n.find(".togglec").hide():n.find(".togglet").addClass("toggleta"),n.find(".togglet").click(function(){return e(this).toggleClass("toggleta").next(".togglec").slideToggle(300),!0})})},accordions:function(){var n=e(".accordion");n.length>0&&n.each(function(){var n=e(this),a=n.attr("data-state"),i=n.attr("data-active");i?i-=1:i=0,n.find(".acc_content").hide(),"closed"!=a&&n.find(".acctitle:eq("+Number(i)+")").addClass("acctitlec").next().show(),n.find(".acctitle").click(function(){return e(this).next().is(":visible")?e(this).removeClass("acctitlec").next().slideUp("normal"):e(this).addClass("acctitlec").next().slideDown("normal"),!1})})},lightBox:function(){var n=e('[data-lightbox="image"]'),a=e('[data-lightbox="gallery"]'),i=e('[data-lightbox="iframe"]'),s=e('[data-lightbox="ajax"]'),t=e('[data-lightbox="ajax-gallery"]');n.length>0&&n.magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-fade",image:{verticalFit:!0}}),a.length>0&&a.each(function(){var n=e(this);n.find('a[data-lightbox="gallery-item"]').parent(".clone").hasClass("clone")&&n.find('a[data-lightbox="gallery-item"]').parent(".clone").find('a[data-lightbox="gallery-item"]').attr("data-lightbox",""),n.magnificPopup({delegate:'a[data-lightbox="gallery-item"]',type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-fade",image:{verticalFit:!0},gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]}})}),i.length>0&&i.magnificPopup({disableOn:600,type:"iframe",removalDelay:160,preloader:!1,fixedContentPos:!1}),s.length>0&&s.magnificPopup({type:"ajax",closeBtnInside:!1,callbacks:{ajaxContentAdded:function(){m.trigger("lightBoxAjaxAdded")},open:function(){m.addClass("ohidden")},close:function(){m.removeClass("ohidden")}}}),t.length>0&&t.magnificPopup({delegate:'a[data-lightbox="ajax-gallery-item"]',type:"ajax",closeBtnInside:!1,gallery:{enabled:!0,preload:0,navigateByImgClick:!1},callbacks:{ajaxContentAdded:function(){m.trigger("lightBoxAjaxAdded")},open:function(){m.addClass("ohidden")},close:function(){m.removeClass("ohidden")}}})},loadFlexSlider:function(){e(".fslider").addClass("preloader2");var n=e(".fslider").find(".flexslider");n.length>0&&n.each(function(){var n=e(this),a=n.parent(".fslider").attr("data-animation"),i=n.parent(".fslider").attr("data-easing"),s=n.parent(".fslider").attr("data-direction"),t=n.parent(".fslider").attr("data-slideshow"),o=n.parent(".fslider").attr("data-pause"),l=n.parent(".fslider").attr("data-speed"),r=n.parent(".fslider").attr("data-video"),d=n.parent(".fslider").attr("data-pagi"),c=n.parent(".fslider").attr("data-arrows"),u=n.parent(".fslider").attr("data-thumbs"),m=n.parent(".fslider").attr("data-hover"),h=!0,p=!1;a||(a="slide"),i&&"swing"!=i||(i="swing",p=!0),s||(s="horizontal"),t=t?!1:!0,o||(o=5e3),l||(l=600),r||(r=!1),"vertical"==s&&(h=!1),d="false"==d?!1:!0,d="true"==u?"thumbnails":d,c="false"==c?!1:!0,m="false"==m?!1:!0,n.flexslider({selector:".slider-wrap > .slide",animation:a,easing:i,direction:s,slideshow:t,slideshowSpeed:Number(o),animationSpeed:Number(l),pauseOnHover:m,video:r,controlNav:d,directionNav:c,smoothHeight:h,useCSS:p,start:function(n){KLEO.main.animations(),n.parent().removeClass("preloader2");setTimeout(function(){e("#portfolio.portfolio-masonry,#portfolio.portfolio-full,#posts.post-masonry").isotope("layout")},1200);KLEO.main.lightBox(),e(".flex-prev").html('<i class="icon-angle-left"></i>'),e(".flex-next").html('<i class="icon-angle-right"></i>')}})})},resizeVideos:function(){e().fitVids&&e("#content, .entry-content, .activity-inner").fitVids({ignore:".no-fv"})},toggleAjaxSearch:function(){e(".search-trigger").click(function(){return e("#ajax_search_container").hasClass("searchHidden")&&(e("#ajax_search_container").removeClass("searchHidden").addClass("show_search_pop"),e(this).next().find(".ajax_s").focus()),!1})},doAjaxSearch:function(n){var a={delay:350,minChars:3,scope:"body"};this.options=e.extend({},a,n),this.scope=e(this.options.scope),this.body=e("body"),this.timer=!1,this.doingSearch=!1,this.lastVal="",this.request="",this.bind_ev=function(){this.scope.on("keyup",".ajax_s",e.proxy(this.test_search,this)),this.body.on("mousedown",e.proxy(this.hide_search,this)),e(".ajax_s").on("click focus",function(){if(e(this).hasClass("ui-autocomplete-input")===!0)return!1;if(e("body").hasClass("device-xs")===!0)return!1;var n=e(this).closest(".kleo-search-form").find(".kleo_ajax_results");n.is(":empty")||""==e.trim(e(this).val())||n.slideDown("slow"),n.css("opacity","1"),e("body").addClass("header-submenu-open")}),this.body.on("mousedown",function(n){var a=e(n.target);a.is(".kleo_ajax_results, .ajax_s")||0!=a.closest(".kleo_ajax_results").length||e(".kleo-search-form .kleo_ajax_results").css("opacity","0.5").slideUp("slow")})},this.test_search=function(n){clearTimeout(this.timer),(""==e.trim(n.currentTarget.value)||e.trim(n.currentTarget.value.length)>=this.options.minChars)&&(this.timer=setTimeout(e.proxy(this.search,this,n),this.options.delay))},this.hide_search=function(n){var a=e(n.target);a.is("#ajax_search_container")||0!=a.parents("#ajax_search_container").length||e("#ajax_search_container").addClass("searchHidden").removeClass("show_search_pop")},this.search=function(n){var a=n.currentTarget;if(e(a).hasClass("ui-autocomplete-input")===!0)return!1;if(e("body").hasClass("device-xs")===!0)return!1;var i=this,s=e(a).closest("form"),t=s.find(".kleo_ajax_results"),o=s.children("button"),l=s.serialize();if(l+="&action=kleo_ajax_search",s.data("context")&&(l+="&context="+s.data("context")),t.length){if(i.doingSearch===!0&&this.request.abort(),this.lastVal==e.trim(a.value))return void t.slideDown();if(""==e.trim(a.value))return void t.slideUp("fast");this.lastVal=e.trim(a.value),this.request=e.ajax({url:KLEO.ajaxurl,type:"POST",data:l,beforeSend:function(){o.addClass("animate-spin"),i.doingSearch=!0},success:function(e){0==e&&(e=""),t.is(":empty")?t.hide().html(e).slideDown("slow"):t.html(e).slideDown("slow")},complete:function(){o.removeClass("animate-spin"),i.doingSearch=!1,clearTimeout(i.timer)}})}},this.bind_ev()},applyRetina:function(){KLEO.isHighDensity()&&e("[data-retina]").each(function(){""!=e(this).data("retina")&&e(this).find("img").attr("src",e(this).data("retina"))})},ajaxLogin:function(){e("#kleo-login-modal.mfp-hide .username").removeAttr("name"),e("#kleo-login-modal .kleo-login-wrap").length?e(".show-login, .kleo-show-login, .bp-menu.bp-login-nav a, .must-log-in > a").magnificPopup({items:{src:"#kleo-login-modal",type:"inline",focus:".username"},preloader:!1,mainClass:"kleo-mfp-zoom",callbacks:{beforeOpen:function(){e("#kleo-login-modal .username").attr("name","log"),this.st.focus=e(window).width()<700?!1:".username"},open:function(){}}}):e(".show-login, .kleo-show-login, .bp-menu.bp-login-nav a, .must-log-in > a").on("click",function(){e.magnificPopup.close()}),e("form.sq-login-form").on("submit",function(n){var a=e(this),i=a.find(".kleo-login-result"),s=e(this).serialize();s+="&action=kleoajaxlogin",i.show().html(KLEO.loadingMessage),e.ajax({type:"POST",url:KLEO.loginUrl,data:s,success:function(e){KLEO.main.isJsonString(e)&&(e=JSON.parse(e)),i.html(e.message),1==e.loggedin&&(null==e.redirecturl||0==e.redirecturl?document.location.reload():document.location.href=e.redirecturl),KLEO.main.ajaxLostPass()},complete:function(){},error:function(){}}),n.preventDefault()})},isJsonString:function(e){try{JSON.parse(e)}catch(n){return!1}return!0},ajaxLostPass:function(){e(".show-lostpass, span.wrong-response a[href*=lostpassword]").magnificPopup({items:{src:"#kleo-lostpass-modal",type:"inline",focus:"input"},preloader:!1,mainClass:"kleo-mfp-zoom",callbacks:{beforeOpen:function(){this.st.focus=e(window).width()<700?!1:"#forgot-email"}}}),e(".sq-forgot-form").on("submit",function(){var n=e(this),a=n.find(".kleo-lost-result");return a.show().html(KLEO.loadingMessage),e.ajax({url:KLEO.ajaxurl,type:"POST",data:{action:"kleo_lost_password",user_login:e("#forgot-email").val(),security_lost_pass:e("#security-lost-pass").val()},success:function(e){a.html(e)},error:function(){a.html(KLEO.errorMessage).css("color","red")}}),!1})},kleoIsotope:function(){e(".row-masonry-enabled").isotope({itemSelector:".vc_column_container"})},charts:function(){"undefined"!=typeof google&&e.isFunction(google.setOnLoadCallback)&&google.charts.setOnLoadCallback(function(){KLEO.main.kleoIsotope()})}},KLEO.header={init:function(){KLEO.header.adminBarScrollClass(),e(".sidemenu-trigger").on("click touchstart",function(){return e(".menu-list .active .submenu").stop(!0,!0).slideUp(200),e(".menu-list li").removeClass("open"),e("body").hasClass("force-close-sidemenu")?(e("body").removeClass("force-close-sidemenu"),(e("body").hasClass("device-md")||e("body").hasClass("device-lg"))&&e("body").toggleClass("sidemenu-is-open")):e("body").toggleClass("sidemenu-is-open"),e("body").trigger("sidemenu-moving-start"),setTimeout(function(){KLEO.bp.bpIsotope(),KLEO.main.kleoIsotope(),e("body").trigger("sidemenu-moving")},300),(e("body").hasClass("device-md")||e("body").hasClass("device-lg"))&&(e("body").hasClass("sidemenu-is-open")?KLEO.main.setCookie("kleo-side","open","/",30):KLEO.main.setCookie("kleo-side","","/",-1)),!1}),e(".second-menu-trigger").on("click touchstart",function(){return e("body").toggleClass("second-menu-is-open"),!1}),e(".menu-list .has-submenu > .menu-arrow").click(function(){e(this);e("body").hasClass("device-xxs")||e("body").hasClass("device-xs")||(e("body").hasClass("device-sm")?e("body").hasClass("sidemenu-is-open")||e("body").addClass("sidemenu-is-open"):e("body").hasClass("sidemenu-is-open")&&e("body").removeClass("sidemenu-is-open"))}),e("#main-search").on("focus",function(){e("body").hasClass("device-sm")&&e("#searchform").addClass("expand")}).on("blur",function(){e("body").hasClass("device-sm")&&e("#searchform").removeClass("expand")}),e(".menu-list .current_page_item").parents(".current-menu-ancestor").length&&e(".menu-list .current_page_item").parents(".current-menu-ancestor").addClass("open"),m.on("click",function(n){(m.hasClass("device-xs")||m.hasClass("device-xxs"))&&(0===e(n.target).closest(".second-menu").length&&e("body").removeClass("second-menu-is-open"),0===e(n.target).closest("#sidemenu-wrapper").length&&e("body").removeClass("sidemenu-is-open"))}),m.on("click",function(n){var a=e(n.target);a.is(".submenu")||0!==a.closest(".submenu").length||(e(".basic-menu .has-submenu.open").removeClass("open"),a.is(".ajax_s")||(e("body").removeClass("header-submenu-open"),+e(".pm-user-menu").removeClass("header-submenu-open")))}),m.on("click",".open-submenu",function(e){return KLEO.header.menuDropdown(this),e.stopImmediatePropagation(),!1}),m.on("click",".click-menu .header-icons .has-submenu > a",function(e){return KLEO.header.menuDropdown(this),e.stopImmediatePropagation(),!1}),m.on("click",".has-submenu .menu-arrow, .has-submenu > a[href='#']",function(n){return(!e(this).closest("li").parent(".basic-menu").length||e(this).closest(".click-menu").length||KLEO.isMobile.tabletWidth()||KLEO.isMobile.any())&&KLEO.header.menuDropdown(this),n.stopImmediatePropagation(),!1}),KLEO.header.onScroll()},onScroll:function(){u.on("scroll touchmove",function(){KLEO.header.adminBarScrollClass()})},onLoad:function(){},onResize:function(){},menuDropdown:function(n){var a=e(n).parents(".has-submenu").length,i=e(n).closest(".has-submenu");a>1?i.hasClass("open")?(i.siblings(".has-submenu").removeClass("open"),i.removeClass("open"),e("body").removeClass("header-submenu-open")):(i.addClass("open"),e("body").addClass("header-submenu-open"),e(i).parent().addClass("header-submenu-open")):i.hasClass("open")?(i.removeClass("open"),e(".basic-menu .has-submenu").removeClass("open"),e("body").removeClass("header-submenu-open"),e(i).parent().removeClass("header-submenu-open"),e(".pm-user-menu").removeClass("header-submenu-open")):(i.removeClass("open"),e(".basic-menu .has-submenu").removeClass("open"),i.addClass("open"),e("body").addClass("header-submenu-open"),e(i).parent().addClass("header-submenu-open"))},adminBarScrollClass:function(){e(window).width()<4096?e("html").toggleClass("header-scrolled",e(document).scrollTop()>0):e("html").removeClass("header-scrolled")}},KLEO.bp={init:function(){e("body").on("gridLoaded",function(){KLEO.bp.bpIsotope()}),e("body").on("bpActivityLoaded",function(){KLEO.main.resizeVideos()}),e(".kleo-notifications-nav").length&&e("#header").on("click",".kleo-notifications-nav a.mark-as-read",function(n){KLEO.bp.notificationsRead(e(this)),n.preventDefault()}),(e(".kleo-notifications-nav").length||e(".kleo-messages-nav").length)&&KLEO.hasOwnProperty("bpAjaxRefresh")&&"0"!=KLEO.bpAjaxRefresh&&KLEO.bp.ajaxCalls()},bpIsotope:function(){e(".main-content #members-list, .main-content #member-list, .main-content .groups-dir-list #groups-list, .main-content .groups #groups-list").isotope({itemSelector:"li"})},ajaxCalls:function(){return m.hasClass("customize-preview")?!1:void(KLEO.bp.rehreshID=setInterval(function(){var n="action=kleo_bp_ajax_call";e(".kleo-notifications-nav").length&&(n+="&current_notifications="+e(".kleo-notifications b").first().text()),e(".kleo-messages-nav").length&&(n+="&current_messages="+e(".kleo-messages-nav b").first().text()),e.ajax({url:KLEO.ajaxurl,type:"GET",dataType:"json",data:n,success:function(n){null!==n&&("success"==n.statusNotif&&("0"==n.countNotif?(e(".kleo-notifications-nav .footer-item").hide(),e(".kleo-notifications-nav b").removeClass("new-alert").addClass("no-alert"),e(".kleo-notifications-nav .submenu").removeClass("has-notif")):(e(".kleo-notifications-nav").addClass("kleo-loading"),e(".kleo-notifications-nav b").removeClass("no-alert").addClass("new-alert"),e(".kleo-notifications-nav .submenu").addClass("has-notif"),e(".kleo-notifications-nav .footer-item").show()),e(".kleo-notifications-nav b").text(n.countNotif),e(".kleo-notifications-nav .kleo-submenu-item").remove(),e(".kleo-notifications-nav .submenu").prepend(n.dataNotif)),"success"==n.statusMessages&&("0"==n.countMessagew?(e(".kleo-messages-nav .footer-item").hide(),e(".kleo-messages-nav b").removeClass("new-alert").addClass("no-alert"),e(".kleo-messages-nav .submenu").removeClass("has-notif")):(e(".kleo-messages-nav").addClass("kleo-loading"),e(".kleo-messages-nav b").removeClass("no-alert").addClass("new-alert"),e(".kleo-messages-nav .submenu").addClass("has-notif"),e(".kleo-messages-nav .footer-item").show()),e(".kleo-messages-nav b").text(n.countMessages),e(".kleo-messages-nav .kleo-submenu-item").remove(),e(".kleo-messages-nav .submenu").prepend(n.dataMessages)))}})},KLEO.bpAjaxRefresh))},notificationsRead:function(){var n={action:"kleo_bp_notification_mark_read"};e.ajax({url:KLEO.ajaxurl,type:"GET",dataType:"json",data:n,beforeSend:function(){e(".kleo-notifications-nav").addClass("kleo-loading")},success:function(n){"success"==n.status&&("0"==n.count?(e(".kleo-notifications-nav .kleo-submenu-item").remove(),e(".kleo-notifications-nav .submenu").prepend(n.empty),e(".kleo-notifications-nav .footer-item").hide(),e(".kleo-notifications-nav b").removeClass("new-alert").addClass("no-alert"),e(".kleo-notifications-nav .submenu").removeClass("has-notif")):(e(".kleo-notifications-nav b").removeClass("no-alert").addClass("new-alert"),e(".kleo-notifications-nav .submenu").addClass("has-notif"),e(".kleo-notifications-nav .footer-item").show()),e(".kleo-notifications-nav b").text(n.count))},complete:function(){e(".kleo-notifications-nav").removeClass("kleo-loading")}})}},e.fn.inlineStyle=function(n){return this.prop("style")[e.camelCase(n)]},e.fn.doOnce=function(e){return this.length&&e.apply(this),this};var u=e(window),m=e("body"),h=e("#page-wrapper");e(document).ready(function(){KLEO.main.init(),KLEO.header.init(),KLEO.bp.init()}),u.load(function(){KLEO.main.onLoad(),KLEO.header.onLoad(),KLEO.bp.bpIsotope()}),u.on("resize",function(){KLEO.main.onResize(),KLEO.header.onResize()})}(jQuery),function(e){function n(){e(i).each(function(){e(this).flexMenu({undo:!0}).flexMenu(this.options)})}e.fn.flexMenu=function(n){var a,s=e.extend({threshold:2,cutoff:2,linkText:"&#xe8c0;",linkTitle:"&#xe8c0;",linkTextAll:"&#xe8c0;",linkTitleAll:"Open/Close Menu",showOnHover:!0,popupAbsolute:!0,undo:!1},n);return this.options=s,a=e.inArray(this,i),a>=0?i.splice(a,1):i.push(this),this.each(function(){function n(e){var n=Math.ceil(e.offset().top)>=f+g?!0:!1;return n}var a,i,t,o,l,r,d,c=e(this),u=c.find("> li"),m=u.first(),h=u.last(),p=c.find("li").length,f=Math.floor(m.offset().top),g=Math.floor(m.outerHeight(!0)),v=!1;if(n(h)&&p>s.threshold&&!s.undo&&c.is(":visible")&&!KLEO.isMobile.tabletWidth()){{var b=e('<ul class="flexMenu-popup submenu" style="'+(s.popupAbsolute?" position: absolute;":"")+'"></ul>');m.offset().top}for(d=p;d>1;d--){if(a=c.find("> li:last-child"),i=n(a),a.appendTo(b),d-1<=s.cutoff){e(c.children().get().reverse()).appendTo(b),v=!0;break}if(!i)break}c.append(v?'<li class="more-wrapper flexMenu-allInPopup has-submenu"><a class="more" href="#" title="'+s.linkTitleAll+'">'+s.linkTextAll+"</a></li>":'<li class="more-wrapper has-submenu"><a href="#" class="more" title="'+s.linkTitle+'">'+s.linkText+"</a></li>"),t=c.find("> li.more-wrapper"),n(t)&&c.find("> li:nth-last-child(2)").appendTo(b),b.children().each(function(e,n){b.prepend(n)}),t.append(b),o=c.find("> li.more-wrapper > a"),s.showOnHover&&"undefined"!=typeof Modernizr&&!Modernizr.touch&&t.hover(function(){b.show(),e(this).addClass("active")},function(){b.hide(),e(this).removeClass("active")})}else if(s.undo&&c.find("ul.flexMenu-popup")){for(r=c.find("ul.flexMenu-popup"),l=r.find("li").length,d=1;l>=d;d++)r.find("> li:first-child").appendTo(c);r.remove(),c.find("> li.more-wrapper").remove()}})},e(document).ready(function(){e(".header-menu > li").length>1&&e(".header-menu").flexMenu({showOnHover:!1,popupAbsolute:!1}),e(".header-icons > li").length>1&&e(".header-icons").flexMenu({showOnHover:!1,popupAbsolute:!1}),e("body").on("sidemenu-moving",function(){n()})});var a,i=[];e(window).resize(function(){clearTimeout(a),a=setTimeout(function(){n()},200)})}(jQuery);
